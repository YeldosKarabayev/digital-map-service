{"ast":null,"code":"import{useState,useEffect}from'react';import Signal from'../image/signal-tower.png';import Tulp from'../image/tulip.png';import{useNavigate,Link,useLocation}from'react-router-dom';import{useSendLogoutMutation}from'../features/auth/authApiSlice';import useAuth from'../hooks/useAuth';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const DASH_REGEX=/^\\/dash(\\/)?$/;const USERS_REGEX=/^\\/users(\\/)?$/;const Header=()=>{const{isManager,isAdmin}=useAuth();const navigate=useNavigate();const{pathname}=useLocation();const[sendLogout,{isLoading,isSuccess,isError,error}]=useSendLogoutMutation();useEffect(()=>{if(isSuccess)navigate('/');},[isSuccess,navigate]);const onNewUserClicked=()=>navigate('/dash/users/new');const onUserClicked=()=>navigate('/dash/users');const onLogoutClicked=()=>sendLogout();let dashClass=null;if(!DASH_REGEX.test(pathname)&&!USERS_REGEX.test(pathname)){dashClass=\"dash-header__container--small\";}let newUserButton=null;if(USERS_REGEX.test(pathname)){newUserButton=/*#__PURE__*/_jsx(\"button\",{className:\"headerButton\",title:\"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C\",onClick:onNewUserClicked});}let userButton=null;if(isManager||isAdmin){if(USERS_REGEX.test(pathname)&&pathname.includes('/dash')){newUserButton=/*#__PURE__*/_jsx(\"button\",{className:\"headerButton\",title:\"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C\\u0438\",onClick:onUserClicked});}}const logoutButton=/*#__PURE__*/_jsx(\"button\",{className:\"headerButton\",title:\"\\u0412\\u044B\\u0439\\u0442\\u0438\",onClick:sendLogout,children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"});const errClass=isError?\"errmsg\":\"offscreen\";let buttonContent;if(isLoading){buttonContent=/*#__PURE__*/_jsx(\"p\",{children:\"\\u0412\\u044B\\u0445\\u043E\\u0434 \\u0438\\u0437 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u044B...\"});}else{buttonContent=/*#__PURE__*/_jsxs(_Fragment,{children:[newUserButton,userButton,logoutButton]});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",style:{alignItems:\"center\",justifyContent:\"space-between\",display:\"flex\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:'center',fontSize:\"22px\",color:\"#fff\",marginLeft:\"0px\"},children:[/*#__PURE__*/_jsx(\"img\",{src:Tulp,style:{width:\"38px\",height:\"38px\",marginRight:\"10px\"},alt:\"logo\"}),\"SHYMKENT\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"headerRight\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:'center',fontSize:\"22px\",color:\"#fff\"},children:[\"\\u041E\\u043F\\u0435\\u0440\\u0430\\u0442\\u043E\\u0440\\u044B \\u0441\\u0432\\u044F\\u0437\\u0438\",/*#__PURE__*/_jsx(\"img\",{src:Signal,style:{width:\"36px\",height:\"36px\",marginLeft:\"10px\"},alt:\"logo\"})]}),buttonContent]})]})})});};export default Header;","map":{"version":3,"names":["useState","useEffect","Signal","Tulp","useNavigate","Link","useLocation","useSendLogoutMutation","useAuth","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","DASH_REGEX","USERS_REGEX","Header","isManager","isAdmin","navigate","pathname","sendLogout","isLoading","isSuccess","isError","error","onNewUserClicked","onUserClicked","onLogoutClicked","dashClass","test","newUserButton","className","title","onClick","userButton","includes","logoutButton","children","errClass","buttonContent","style","alignItems","justifyContent","display","fontSize","color","marginLeft","src","width","height","marginRight","alt"],"sources":["C:/Users/MSI/Desktop/final-map-app/client/client/src/components/Header.jsx"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport Signal from '../image/signal-tower.png'\r\nimport Tulp from '../image/tulip.png'\r\nimport { useNavigate, Link, useLocation } from 'react-router-dom';\r\n\r\nimport { useSendLogoutMutation } from '../features/auth/authApiSlice';\r\nimport useAuth from '../hooks/useAuth';\r\n\r\n\r\nconst DASH_REGEX = /^\\/dash(\\/)?$/\r\nconst USERS_REGEX = /^\\/users(\\/)?$/\r\n\r\n\r\nconst Header = () => {\r\n    const { isManager, isAdmin } = useAuth()\r\n\r\n  const navigate = useNavigate()\r\n  const { pathname } = useLocation()\r\n\r\n  const [sendLogout, {\r\n      isLoading,\r\n      isSuccess,\r\n      isError, \r\n      error\r\n  }] = useSendLogoutMutation()\r\n\r\n\r\n  useEffect(() => {\r\n      if(isSuccess) navigate('/')\r\n  }, [isSuccess, navigate])\r\n\r\n  const onNewUserClicked = () => navigate('/dash/users/new')\r\n  const onUserClicked = () => navigate('/dash/users')\r\n  const onLogoutClicked = () => sendLogout()\r\n\r\n\r\n\r\n  let dashClass = null\r\n    if (!DASH_REGEX.test(pathname) && !USERS_REGEX.test(pathname)) {\r\n        dashClass = \"dash-header__container--small\"\r\n    }\r\n\r\n    let newUserButton = null\r\n    if (USERS_REGEX.test(pathname)) {\r\n        newUserButton = (\r\n            <button\r\n                className='headerButton'\r\n                title='Новый пользователь'\r\n                onClick={onNewUserClicked}\r\n            ></button>\r\n        )\r\n    }\r\n\r\n    let userButton = null\r\n    if(isManager || isAdmin) {\r\n        if (USERS_REGEX.test(pathname) && pathname.includes('/dash')) {\r\n            newUserButton = (\r\n                <button\r\n                    className='headerButton'\r\n                    title='Пользовательи'\r\n                    onClick={onUserClicked}\r\n                ></button>\r\n            )\r\n        }\r\n    }\r\n\r\n    const logoutButton = (\r\n      <button\r\n          className=\"headerButton\"\r\n          title=\"Выйти\"\r\n          onClick={sendLogout}\r\n      >\r\n        Выйти\r\n      </button>\r\n  )\r\n\r\n  const errClass = isError ? \"errmsg\" : \"offscreen\"\r\n\r\n  let buttonContent\r\n  if(isLoading) {\r\n    buttonContent = <p>Выход из системы...</p>\r\n  } else {\r\n    buttonContent = (\r\n        <> \r\n            {newUserButton}\r\n            {userButton}\r\n            {logoutButton}\r\n        </>\r\n    )\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n    {/* <p className={errClass}>{error?.data?.message}</p> */}\r\n\r\n    <div className='header'>\r\n        <div className='container' style={{alignItems: \"center\", justifyContent: \"space-between\", display: \"flex\"}}>\r\n            <div style={{display: \"flex\", alignItems: 'center', fontSize: \"22px\", color: \"#fff\", marginLeft: \"0px\"}}>\r\n                <img src={Tulp} style={{width: \"38px\", height: \"38px\", marginRight: \"10px\"}} alt=\"logo\" />\r\n                SHYMKENT\r\n            </div>\r\n            <div className='headerRight'>\r\n            <div style={{display: \"flex\", alignItems: 'center', fontSize: \"22px\", color: \"#fff\"}}>\r\n                Операторы связи\r\n                <img src={Signal} style={{width: \"36px\", height: \"36px\", marginLeft: \"10px\"}} alt=\"logo\" />\r\n            </div>\r\n             {buttonContent}\r\n            </div>\r\n        </div>\r\n    </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Header"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}